{% load static %}
<header>
    <div class="header-container">
        <div class="header-menu">
            <div class="burger" onclick="toggleSidebar()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="site-logo">
                <a href="{% url 'app_home:home' %}">
                    <img src="{% static 'img/sp.png' %}" alt="site logo" class="img-site-logo">
                </a>
            </div>
        </div>
        <div class="header-content">
            <div class="header-phone">
                {% for phone in selected_branch.branch_phones.all %}
                    <div class="phone-text">{{ phone.phone }}</div>
                {% empty %}
                    <div class="phone-text">–ù–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤</div>
                {% endfor %}
            </div>
            <label class="theme-toggle-switch">
                <input type="checkbox" id="themeToggle" />
                <span class="toggle-slider"></span>
                <span class="icon sun">‚òÄÔ∏è</span>
                <span class="icon moon">üåô</span>
            </label>
            <div class="right">
                {% if branches %}
                    <form action="{% url 'app_home:select_branch' %}" method="post">
                        {% csrf_token %}
                        <select class="branch-select"
                                name="branch_id"
                                id="branch-select"
                                onchange="this.form.submit()">
                            {% for branch in branches %}
                                <option value="{{ branch.id }}"
                                        {% if branch.id|stringformat:"s" == selected_branch_id %}selected{% endif %}>
                                    {{ branch.address }}
                                </option>
                            {% endfor %}
                        </select>
                    </form>
                {% else %}
                    <p class="no-branches">–°–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤.</p>
                {% endif %}
                <div class="cart-wrapper">
                    <a href="{% url 'app_cart:view_cart' %}">
                        <div class="cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                            <div class="cart-count">{{ cart_total_quantity }}</div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <a href="{% url 'app_home:home' %}">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="{% url 'app_home:discounts' %}">–ê–∫—Ü–∏–∏</a>
    <div class="has-submenu">
        <button onclick="toggleSubmenu('aboutSub')">–û –Ω–∞—Å ‚ñæ</button>
        <div class="submenu" id="aboutSub">
            <a href="{% url 'app_home:home' %}">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
            <a href="{% url 'app_reviews:review_list' %}">–û—Ç–∑—ã–≤—ã</a>
            <a href="{% url 'app_reviews:moderation_list' %}">–ú–æ–¥–µ—Ä–∞—Ü–∏—è</a>
        </div>
    </div>
    <div class="has-submenu">
        <button onclick="toggleSubmenu('catalogSub')">–ö–∞—Ç–∞–ª–æ–≥ ‚ñæ</button>
        <div class="submenu" id="catalogSub">
            {% for category in categories %}
                <a href="{% url 'app_catalog:category_detail' category.slug %}">{{ category.name }}</a>
            {% endfor %}
        </div>
    </div>
    <div class="has-submenu">
        <button onclick="toggleSubmenu('profileSub')">–ü—Ä–æ—Ñ–∏–ª—å ‚ñæ</button>
        <div class="submenu" id="profileSub">
            {% if user.is_authenticated %}
                {% if user.is_superuser %}
                    <a href="{% url 'admin:index' %}" target="_blank">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                {% endif %}
                <a href="{% url 'socialaccount_connections' %}">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</a>
                <a href="{% url 'app_cart:view_cart' %}">–ö–æ—Ä–∑–∏–Ω–∞</a>
                <a href="{% url 'app_order:order_list' %}">–ó–∞–∫–∞–∑—ã</a>
                <a href="{% url 'app_user:logout' %}">–í—ã—Ö–æ–¥</a>
            {% else %}
                <a href="{% url 'app_user:login' %}">–í—Ö–æ–¥</a>
            {% endif %}
        </div>
    </div>
</div>
<!-- Overlay -->
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>
